import bpy

class SCEASAR_PT_Main(bpy.types.Panel):
    bl_label = "S Ceasar"
    bl_idname = "SCEASAR_PT_main"
    bl_space_type = "VIEW_3D"
    bl_region_type = "UI"
    bl_category = "S Ceasar"
    
    def draw(self, context):
        layout = self.layout
        props = context.scene.sceasar_props

        # Pick icon dynamically based on department
        if props.mode == "MODEL":
            icon = 'GHOST_ENABLED'       # example icon for modeling
        elif props.mode == "TEXTURE":
            icon = 'MATERIAL'       # example icon for texturing
        else:
            icon = 'HOME'  # fallback icon

        row = layout.row()
        row.scale_y = 1.5
        row.prop(props, "mode", text="", icon=icon)




# Topbar Menu
class SCEASAR_MT_Menu(bpy.types.Menu):
    bl_label = "S Ceasar Tools"
    bl_idname = "SCEASAR_MT_menu"

    def draw(self, context):
        layout = self.layout
        layout.operator("sceasar.update_addon")
        layout.operator("sceasar.reload_addon")


def menu_func(self, context):
    self.layout.menu(SCEASAR_MT_Menu.bl_idname)


# Register
classes = (SCEASAR_PT_Main, SCEASAR_MT_Menu)

def register():
    for cls in classes: bpy.utils.register_class(cls)
    bpy.types.TOPBAR_MT_editor_menus.append(menu_func)

def unregister():
    bpy.types.TOPBAR_MT_editor_menus.remove(menu_func)
    for cls in reversed(classes): bpy.utils.unregister_class(cls)
